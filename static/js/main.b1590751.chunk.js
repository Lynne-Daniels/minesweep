(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),c=a.n(i),s=(a(16),a(2)),o=a(3),u=a(6),l=a(4),h=a(5),d=(a(18),a(7)),m=a(8),f=a(1),v=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.squareStuff.handleClick(e,this.props.squareStuff)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"square",onMouseDown:this.handleClick.bind(this)},this.props.squareStuff.isCleared?this.props.squareStuff.char:""))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).faces={newGame:"\ud83d\ude00",winner:"\ud83d\ude0e",loser:"\ud83d\ude16"},a.height=9,a.width=9,a.blankSquares=71,a.numMines=10,a.state={face:a.faces.newGame,grid:[],numMines:a.numMines,seconds:0,timer:null,unclearedNonMinedSquares:a.blankSquares},a.clearSquare=a.clearSquare.bind(Object(f.a)(Object(f.a)(a))),a.sweep=a.sweep.bind(Object(f.a)(Object(f.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.initializeGame()}},{key:"initializeGame",value:function(){var e=this;this.setState(function(t){var a={prevState:t};return a.grid=e.makeGrid(e.width,e.height),{grid:a.grid,face:e.faces.newGame,numMines:e.numMines,seconds:0,unclearedNonMinedSquares:e.blankSquares}})}},{key:"startTimer",value:function(){this.setState(function(e){return{seconds:e.seconds+1}})}},{key:"stopTimer",value:function(e){}},{key:"endGameIfWon",value:function(){this.state.grid.reduce(function(e,t){return e+t.reduce(function(e,t){return t.isCleared&&"blank"===t.val?e+1:e},0)},0)===this.state.unclearedNonMinedSquares&&this.endGame(!0)}},{key:"endGame",value:function(e){var t=this;clearInterval(this.state.timer),this.setState(function(a){var n=Object(m.a)({},a);return n.grid=a.grid.map(function(t){return t.map(function(t){return t.isActive=!1,"mine"===t.val&&"\ud83d\udea9"!==t.char&&(t.char=e?"\ud83d\udea9":"\ud83d\udca3",t.isCleared=!0),"blank"===t.val&&"\ud83d\udea9"===t.char&&(t.char="\u274c"),t})}),n.face=e?t.faces.winner:t.faces.loser,n.timer=null,n})}},{key:"startGame",value:function(){var e=this;return setInterval(function(){e.startTimer()},1e3)}},{key:"labelMine",value:function(e,t){this.setState(function(a){var n=Object(d.a)(a.grid),r=[a.numMines],i=a.grid[e][t];return!0===i.isCleared&&"\ud83d\udea9"===i.char?(r++,"blank"===i.val?n[e][t].char=i.count>0?i.count.toString():"\ud83d\udca6":n[e][t].char="\ud83d\udea9",n[e][t].isCleared=!1):(r--,n[e][t].char="\ud83d\udea9",n[e][t].isCleared=!0),{grid:n,numMines:r}})}},{key:"clearSquare",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.setState(function(a){var n=Object(d.a)(a.grid);return n[e][t].isCleared=!0,n[e][t].isActive=!1,{grid:n}},a)}},{key:"sweep",value:function(e,t,a){var n=this;if(!(e<0||e>this.height||t<0||t>this.width)&&!this.state.grid[e][t].isCleared){var r=this.state.grid[e][t];if("mine"===r.val&&a&&("click"===a.type||"mousedown"===a.type))return this.clearSquare(e,t),this.setState(function(a){var n=Object(m.a)({},a);return n.grid[e][t].char="\ud83d\udd25",{grid:n.grid}}),void this.endGame(!1);r.count>0?this.clearSquare(e,t,this.endGameIfWon):"blank"!==r.val||this.state.grid[e][t].isCleared||(this.clearSquare(e,t),this.clearSquare(e,t,function(){return function(){for(var a=e-1,r=e+1,i=Math.max(0,t-1);i<Math.min(n.width,t+2);i++)a>=0&&n.sweep(a,i),r<n.height&&n.sweep(r,i);t>=1&&n.sweep(e,t-1),t<n.width-1&&n.sweep(e,t+1)}()}))}}},{key:"makeGrid",value:function(e,t){for(var a=this,n=[],r=0;r<t;r++){for(var i=[],c=0;c<e;c++){var s={row:r,col:c,val:"blank",char:"\ud83d\udca6",count:0,isActive:!0,isCleared:!1,handleClick:function(e,t){e.preventDefault(),null===a.state.timer&"blank"===a.state.grid[t.row][t.col].val&&a.setState({timer:a.startGame()}),a.state.grid[t.row][t.col].isActive&&(0===e.button&&a.sweep(t.row,t.col,e),2===e.button&&a.labelMine(t.row,t.col,e))}};s.handleClick=s.handleClick.bind(s),i.push(s)}n.push(i)}for(var o=0;o<this.numMines;o++){var u=Math.floor(Math.random()*t),l=Math.floor(Math.random()*e);"blank"===n[u][l].val?(n[u][l].val="mine",n[u][l].char="\ud83d\udca3"):o--}return n.forEach(function(e,t,a){e.forEach(function(e,a){for(var r=t+1,i=a-1,c=a+1,s=t-1;s<=r;s++)for(var o=i;o<=c;o++)s<0||s>=n.length||o<0||o>=n[0].length||s===t&&o===a||"mine"===n[s][o].val&&n[t][a].count++;"mine"!==n[t][a].val&&0!==n[t][a].count&&(n[t][a].char=n[t][a].count.toString())})}),n}},{key:"makeRow",value:function(e,t){return r.a.createElement("div",{className:"row",key:t},e.map(function(e){return r.a.createElement(v,{key:e.row+"-"+e.col,squareStuff:e,char:"g"})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("header",null,r.a.createElement("div",{className:"scoreboard"},r.a.createElement("div",{className:"score-title"},"Mines"),r.a.createElement("div",{className:"score-item"},this.state.numMines," ")),r.a.createElement("button",{onClick:function(){return e.initializeGame()}},this.state.face),r.a.createElement("div",{className:"scoreboard"},r.a.createElement("div",{className:"score-title"},"Timer"),r.a.createElement("div",{className:"score-item"},this.state.seconds," "))),r.a.createElement("main",{className:"centered"},this.state.grid.map(function(t,a){return e.makeRow(t,a)})))}}]),t}(n.Component),k=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.b1590751.chunk.js.map